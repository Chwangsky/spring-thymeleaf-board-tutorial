<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>게시판 삭제</title>
    <meta charset="UTF-8" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-5">
    <h2 class="mb-4">게시판 삭제</h2>
    <form id="deleteForm" onsubmit="return confirmDelete()">
        <div class="mb-3">
            <label for="password" class="form-label">비밀번호</label>
            <input type="password" id="password" name="password" class="form-control" placeholder="비밀번호를 입력해주세요" required>
        </div>
        
        <div class="d-flex justify-content-between">
            <button type="button" class="btn btn-secondary" onclick="window.location.href='[@{/boards/free/list}]'">취소</button>
            <button type="submit" class="btn btn-danger">확인</button>
        </div>
    </form>

    <script>
        function confirmDelete() {
            if (confirm("정말로 삭제하시겠습니까?")) {
                const form = document.getElementById('deleteForm');
                const formData = new FormData(form);
                const password = formData.get('password');

                fetch('[@{/boards/free/delete}]', {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ password: password })
                }).then(response => {
                    if (response.ok) {
                        window.location.href = '[@{/boards/free/list}]';
                    } else {
                        alert('삭제 실패: 비밀번호가 일치하지 않습니다.');
                    }
                });

                return false; // 기본 폼 제출 방지
            }
            return false;
        }
    </script>
</body>
</html>
